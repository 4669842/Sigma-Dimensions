@Kopernicus:FOR[SigDim2]
{
	@Body,*
	{
		@Atmosphere:HAS[!AtmosphereFromGround:HAS[#innerRadius[*]]]
		{
			%AtmosphereFromGround
			{
				innerRadiusMult = 0.999375
			}
		}
		@Atmosphere:HAS[!AtmosphereFromGround:HAS[#outerRadius[*]]]
		{
			%AtmosphereFromGround
			{
				outerRadiusMult = 1.025
			}
		}
		@Atmosphere:HAS[#atmosphereDepth[*]]
		{
			%altitude = #$atmosphereDepth$
			%maxAltitude = #$atmosphereDepth$
		}
		@Atmosphere:HAS[#altitude[*],~atmosphereDepth[*]]
		{
			%maxAltitude = #$altitude$
			%atmosphereDepth = #$altitude$
		}
		@Atmosphere:HAS[#maxAltitude[*],~altitude[*],~atmosphereDepth[*]]
		{
			%altitude = #$maxAltitude$
			%atmosphereDepth = #$maxAltitude$
		}
		@Atmosphere
		{
			@maxAltitude *= #$../PlanetDimensions[2]$
			@altitude *= #$../PlanetDimensions[2]$
			@atmosphereDepth *= #$../PlanetDimensions[2]$
			%AtmosphereFromGround {}
			@AtmosphereFromGround:HAS[~innerRadius[*]]
			{
				innerRadius = #$../../Properties/radius$
				@innerRadius *= #$innerRadiusMult$
			}
			@AtmosphereFromGround:HAS[~outerRadius[*]]
			{
				outerRadius = #$../../Properties/radius$
				@outerRadius *= #$outerRadiusMult$
			}
			@AtmosphereFromGround:HAS[~sunAtmo[True]]
			{
				// inner radius
				@innerRadius -= #$../../Properties/radius$
				@innerRadius *= #$../../PlanetDimensions[2]$
				@innerRadius *= #$../../PlanetDimensions[6]$
				@innerRadius /= #$../../PlanetDimensions[0]$
				@innerRadius += #$../../Properties/radius$
				@innerRadius *= #$../../PlanetDimensions[0]$
				
				// outer radius
				@outerRadius -= #$../../Properties/radius$
				@outerRadius *= #$../../PlanetDimensions[2]$
				@outerRadius *= #$../../PlanetDimensions[6]$
				%transformScale = #$outerRadius$
				@outerRadius /= #$../../PlanetDimensions[0]$
				@outerRadius += #$../../Properties/radius$
				@outerRadius *= #$../../PlanetDimensions[0]$
				!innerRadiusMult,* = DEL
				!outerRadiusMult,* = DEL
			}
			@AtmosphereFromGround:HAS[#transformScale[<6000]]
			{
				@transformScale = 6000
			}
			@AtmosphereFromGround:HAS[~sunAtmo[True]]
			{
				@transformScale *= 2
				@transformScale /= #$../../Properties/radius$
				@transformScale /= #$../../PlanetDimensions[0]$
				@transformScale += 1
				@transformScale = #$transformScale$,$transformScale$,$transformScale$
			}
			@AtmosphereFromGround:HAS[#sunAtmo[True]]
			{
				!sunAtmo = DEL
				%transformScale = 0,0,0
			}
			
			// pressure ASL
			
			@pressureCurve
			{
				@key,* ^= :$: 0 0 0 x:
				@key,*[1, ] *= #$../../PlanetDimensions[10]$
				@key,*[2, ] *= #$../../PlanetDimensions[10]$
				@key,*[3, ] *= #$../../PlanetDimensions[10]$
				@key,* ^= : 0 0 0 x$: :
			}
			
			// temperature ASL
			
			@temperatureCurve
			{
				@key,* ^= :$: 0 0 0 x:
				@key,*[1, ] *= #$../../PlanetDimensions[11]$
				@key,*[2, ] *= #$../../PlanetDimensions[11]$
				@key,*[3, ] *= #$../../PlanetDimensions[11]$
				@key,* ^= : 0 0 0 x$: :
			}
		}	
		@Atmosphere:HAS[~pressureCurveIsNormalized[True]]
		{
			// pressureCurve
			
			@pressureCurve
			{
				@key,* ^= :$: 0 0 0 x:
				@key,*[0, ] *= #$../../PlanetDimensions[2]$
				@key,*[2, ] /= #$../../PlanetDimensions[2]$
				@key,*[3, ] /= #$../../PlanetDimensions[2]$
				@key,* ^= : 0 0 0 x$: :
			}
		}
		@Atmosphere:HAS[~temperatureCurveIsNormalized[True]]
		{
			// temperatureCurve
			
			@temperatureCurve
			{
				@key,* ^= :$: 0 0 0 x:
				@key,*[0, ] *= #$../../PlanetDimensions[2]$
				@key,*[2, ] /= #$../../PlanetDimensions[2]$
				@key,*[3, ] /= #$../../PlanetDimensions[2]$
				@key,* ^= : 0 0 0 x$: :
			}
		}
		@Atmosphere
		{
			// temperatureSunMultCurve
			
			@temperatureSunMultCurve
			{
				@key,* ^= :$: 0 0 0 x:
				@key,*[0, ] *= #$../../PlanetDimensions[2]$
				@key,*[2, ] /= #$../../PlanetDimensions[2]$
				@key,*[3, ] /= #$../../PlanetDimensions[2]$
				@key,* ^= : 0 0 0 x$: :
			}
		}
	}
}
